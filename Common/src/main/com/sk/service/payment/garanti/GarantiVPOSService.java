package com.sk.service.payment.garanti;import java.io.IOException;import org.apache.http.client.ClientProtocolException;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import com.sk.domain.CreditCardPaymentMethod;import com.sk.service.payment.ResponseStatus;import com.sk.service.payment.VPOSResponse;import com.sk.util.http.HttpConnection;import com.sk.util.http.HttpResult;@Servicepublic class GarantiVPOSService {	@Autowired	private GarantiRequestFactory requestFactory;	@Autowired	private GarantiVPOSResponseHandler garantiVPOSResponseHandler;	public VPOSResponse makePayment(CreditCardPaymentMethod cardPaymentMethod) {		HttpConnection connection = requestFactory.createRequest(cardPaymentMethod);		try {			HttpResult result = connection.execute();			return garantiVPOSResponseHandler.handle(result);		} catch (ClientProtocolException e) {			return new VPOSResponse(ResponseStatus.CONNECTION_PROBLEM);		} catch (IOException e) {			return new VPOSResponse(ResponseStatus.CONNECTION_PROBLEM);		}	}	public void setRequestFactory(GarantiRequestFactory requestFactory) {		this.requestFactory = requestFactory;	}	public void setGarantiVPOSResponseHandler(GarantiVPOSResponseHandler garantiVPOSResponseHandler) {		this.garantiVPOSResponseHandler = garantiVPOSResponseHandler;	}		}