package com.sk.service;import org.junit.Before;import org.junit.Test;import org.junit.runner.RunWith;import org.mockito.ArgumentCaptor;import org.mockito.Mock;import org.mockito.invocation.InvocationOnMock;import org.mockito.runners.MockitoJUnitRunner;import org.mockito.stubbing.Answer;import com.sk.domain.Order;import com.sk.domain.OrderStatus;import com.sk.domain.PaymentMethod;import com.sk.domain.ShoppingCart;import com.sk.domain.dao.OrderDao;import com.sk.util.builder.CreditCardPaymentMethodBuilder;import com.sk.util.builder.ShoppingCartBuilder;import static org.hamcrest.MatcherAssert.assertThat;import static org.hamcrest.Matchers.equalTo;import static org.mockito.Matchers.any;import static org.mockito.Matchers.anyObject;import static org.mockito.Mockito.verify;import static org.mockito.Mockito.when;@RunWith(MockitoJUnitRunner.class)public class OrderServiceTest {	private OrderService orderService;		@Mock	private OrderDao orderDao;	@Before	public void init() {		orderService = new OrderService();		orderService.setOrderDao(orderDao);	}	@Test	public void shouldCreateAndPersistOrder() {		when(orderDao.persist((Order) anyObject())).then(new Answer<Order>() {			@Override			public Order answer(InvocationOnMock invocation) throws Throwable {				return (Order) invocation.getArguments()[0];			}		});						ShoppingCart shoppingCart = new ShoppingCartBuilder().build();		PaymentMethod paymentMethod = new CreditCardPaymentMethodBuilder().build();		Order order = orderService.createOrder(shoppingCart, paymentMethod);				assertThat(order.getPaymentMethod(), equalTo(paymentMethod));		assertThat(order.getShoppingCart(), equalTo(shoppingCart));	}		@Test	public void shouldPersistOrderWithUnderReviewStatus(){		ShoppingCart shoppingCart = new ShoppingCartBuilder().build();		PaymentMethod paymentMethod = new CreditCardPaymentMethodBuilder().build();				orderService.createOrder(shoppingCart, paymentMethod);				ArgumentCaptor<Order> orderCaptor = ArgumentCaptor.forClass(Order.class);		verify(orderDao).persist(orderCaptor.capture());		assertThat(orderCaptor.getValue().getOrderStatus(), equalTo(OrderStatus.UNDERREVIEW));	}}