<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:sk="http://www.prime.com.tr/sk"
	xmlns:skc="http://java.sun.com/jsf/composite/component"
	template="decorator/adminTemplate.xhtml">

	<ui:define name="title">
		Coupons
	</ui:define>

	<ui:define name="formBody">
		
		<p:tabView id="tabView" orientation="left" dynamic="true">
		    <p:tab title="Shopper Coupons">
		        <p:commandButton value="Add Shopper Coupon" type="button" onclick="shopperCouponDialog.show()"/>
		        <skc:couponTable id="shopperTable" panelId="shopperCouponPanel" couponBean="#{shopperCouponsViewBean}"/>
		    </p:tab>
		    
		    <p:tab title="Category Coupons">
		        <p:commandButton value="Add Category Coupon" type="button" onclick="categoryCouponDialog.show()"/>
		        <skc:couponTable id="categoryTable" panelId="categoryCouponPanel" couponBean="#{categoryCouponsViewBean}"/>
		    </p:tab>
		</p:tabView>
		
		<p:dialog modal="true" widgetVar="shopperCouponDialog">
			<p:panelGrid id="inputShopperPanel" columns="2">
				<h:outputText value="Shopper"/>
				<p:selectOneMenu value="#{shopperCouponsViewBean.selectedShopper}">
					<f:selectItems value="#{shopperCouponsViewBean.couponHolders}" var="couponHolder" itemValue="#{couponHolder}" itemLabel="#{couponHolder.name}"/>
				</p:selectOneMenu>
				
				<h:outputText value="Discount Amount"/>
				<p:inputText value="#{shopperCouponsViewBean.discountAmount}" required="true">
					<f:convertNumber maxFractionDigits="2"/>
				</p:inputText>				
				<h:outputText value="Number Of Coupons"/>
				<p:inputText value="#{shopperCouponsViewBean.numberOfCoupons}" required="true">
					<f:convertNumber integerOnly="true"/>
				</p:inputText>
				
				<p:spacer/>
				<p:commandButton value="Create Coupons" action="#{shopperCouponsViewBean.createCoupon}"
								 process=":form:inputShopperPanel" update=":form:inputShopperPanel :form:tabView:shopperTable:shopperCouponPanel"
								 oncomplete="shopperCouponDialog.hide()"/>
			</p:panelGrid>
		</p:dialog>
		
		<p:dialog modal="true" widgetVar="categoryCouponDialog">
			<p:panelGrid id="inputCategoryPanel" columns="2">
				<h:outputText value="Shopper"/>
				<p:selectOneMenu value="#{categoryCouponsViewBean.selectedCategory}">
					<f:selectItems value="#{categoryCouponsViewBean.couponHolders}" var="couponHolder" itemValue="#{couponHolder}" itemLabel="#{couponHolder.name}"/>
				</p:selectOneMenu>
				
				<h:outputText value="Discount Amount"/>
				<p:inputText value="#{categoryCouponsViewBean.discountAmount}" required="true">
					<f:convertNumber maxFractionDigits="2"/>
				</p:inputText>				
				<h:outputText value="Number Of Coupons"/>
				<p:inputText value="#{categoryCouponsViewBean.numberOfCoupons}" required="true">
					<f:convertNumber integerOnly="true"/>
				</p:inputText>
				
				<p:spacer/>
				<p:commandButton value="Create Coupons" action="#{categoryCouponsViewBean.createCoupon}"
								 process=":form:inputCategoryPanel" update=":form:inputCategoryPanel :form:tabView:categoryTable:categoryCouponPanel"
								 oncomplete="categoryCouponDialog.hide()"/>
			</p:panelGrid>
		</p:dialog>
		
	</ui:define>
	
</ui:composition>